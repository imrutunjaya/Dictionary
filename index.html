<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ultimate Study Dictionary & Current Affairs</title>
<!-- Font Awesome CDN for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');

  * {
    box-sizing: border-box;
  }

  body, html {
    margin: 0; padding: 0;
    font-family: 'Poppins', sans-serif;
    background: #ffffff;
    color: #000000;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  header {
    background: #ffffff;
    border-bottom: 1px solid #ccc;
    color: #000;
    padding: 10px 16px;
    text-align: center;
    font-weight: 600;
    font-size: 12px;
    user-select: none;
  }

  main {
    flex: 1;
    overflow-y: auto;
    padding: 14px 12px 90px 12px;
    max-width: 900px;
    margin: auto;
    width: 100%;
  }
  /* Bottom Navigation Bar with Minimal Black Buttons */
  footer {
    background: #ffffff;
    box-shadow: 0 -1px 5px rgba(0,0,0,0.1);
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 50px;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 0 8px;
    z-index: 1000;
    border-top: 1px solid #ccc;
  }

  .bubble-nav {
    background-color: #000000;
    border: none;
    padding: 6px 14px;
    font-weight: 600;
    color: white;
    cursor: pointer;
    font-size: 10px;
    min-width: 70px;
    text-align: center;
    user-select: none;
    transition: background-color 0.2s ease;
    border-radius: 2px;
    letter-spacing: 0.02em;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }
  .bubble-nav i {
    font-size: 0.85rem;
  }
  .bubble-nav.active {
    background-color: #222222;
  }
  .bubble-nav:hover:not(.active) {
    background-color: #333333;
  }

  /* Search Bar */
  #searchBar {
    position: fixed;
    bottom: 55px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 700px;
    background: white;
    border: 1px solid #000;
    padding: 6px 14px;
    display: none;
    z-index: 1050;
  }
  #searchInput {
    width: 100%;
    padding: 6px 10px;
    font-size: 10px;
    border: none;
    outline: none;
    font-weight: 600;
    letter-spacing: 0.02em;
    color: #000;
    background: #f9f9f9;
    border-radius: 3px;
    box-sizing: border-box;
  }
  #searchInput::placeholder {
    color: #666;
  }
  #searchInput:focus {
    outline: none;
    box-shadow: 0 0 6px #000000aa;
  }
  #searchToggle {
    background: #000000;
    border: none;
    cursor: pointer;
    position: fixed;
    bottom: 110px;
    right: 16px;
    z-index: 1100;
    font-size: 20px;
    color: white;
    width: 36px;
    height: 36px;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
    border-radius: 3px;
    box-shadow: none;
    transition: background-color 0.2s ease;
  }
  #searchToggle:hover {
    background-color: #222222;
  }

  /* Topic List */
  #topicList {
    list-style: none;
    padding: 0;
    margin: 0 auto;
    max-width: 840px;
  }
  .topic-item {
    background: #ffffff;
    border: 1px solid #000000;
    margin-bottom: 6px;
    padding: 10px 14px;
    cursor: pointer;
    font-weight: 600;
    color: #000000;
    font-size: 10px;
    width: 100%;
    box-sizing: border-box;
    user-select: none;
    border-radius: 2px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .topic-item i {
    font-size: 0.85rem;
    color: #000;
    flex-shrink: 0;
  }
  .topic-item:hover {
    background-color: #000000;
    color: #ffffff;
    border-color: #000000;
  }
  .topic-item:focus-visible {
    outline: 2px solid #000000;
    outline-offset: 2px;
    background-color: #222222;
    color: #fff;
  }

  /* Reading Page */
  #readingPage {
    display: none;
    max-width: 900px;
    margin: 0 auto 90px;
    background: #ffffff;
    border: 1px solid #000000;
    padding: 28px 32px;
    line-height: 1.5;
    color: #000000;
    font-size: 13px;
    border-radius: 3px;
    box-sizing: border-box;
    overflow-y: auto;
  }
  #readingPage h2 {
    color: #000000;
    margin-top: 0;
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 20px;
  }
  #readingPage h3 {
    margin-top: 28px;
    margin-bottom: 12px;
    font-weight: 600;
    color: #000;
    font-size: 15px;
  }
  #readingPage ul {
    margin-left: 20px;
    margin-bottom: 24px;
    color: #111;
    font-size: 12px;
  }
  #readingPage p {
    margin-bottom: 18px;
  }
  #backToTopics {
    margin-bottom: 22px;
    background: #000000;
    color: white;
    border: none;
    padding: 10px 26px;
    font-weight: 600;
    font-size: 12px;
    cursor: pointer;
    border-radius: 4px;
    user-select: none;
    transition: background-color 0.2s ease;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  #backToTopics i {
    font-size: 1rem;
  }
  #backToTopics:hover {
    background-color: #222222;
  }

  /* Current Affairs reading style */
  .current-affairs-carousel {
    max-width: 900px;
    margin: 0 auto;
    background: #ffffff;
    border: 1px solid #000000;
    padding: 28px 32px;
    color: #000000;
    min-height: 220px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    font-weight: 600;
    font-size: 13px;
    border-radius: 3px;
  }
  .carousel-title {
    font-size: 18px;
    margin-bottom: 12px;
    color: #000000;
    font-weight: 700;
  }
  .carousel-date {
    font-style: italic;
    color: #444444;
    margin-bottom: 20px;
    font-size: 12px;
  }
  .carousel-content {
    font-size: 13px;
    line-height: 1.5;
    font-weight: 600;
    color: #222222;
  }
  .no-result {
    font-weight: 600;
    font-size: 12px;
    color: #555555;
    padding: 50px 0;
    text-align: center;
  }
</style>
</head>
<body>
<header id="appHeader" tabindex="0" aria-live="polite" aria-atomic="true">Current Affairs</header>

<main>
  <!-- Topic List Page -->
  <ul id="topicList" role="list" aria-label="Subject topics">
    <!-- Dynamic topic items -->
  </ul>

  <!-- Reading Page: detailed content with back button -->
  <section id="readingPage" tabindex="0" aria-live="polite" aria-atomic="true">
    <button id="backToTopics" aria-label="Back to topic list"><i class="fa-solid fa-arrow-left"></i> Back to Topics</button>
    <div id="readingContent">
      <!-- detailed content here -->
    </div>
  </section>
</main>

<button id="searchToggle" aria-label="Toggle Search" title="Search"><i class="fa-solid fa-magnifying-glass"></i></button>
<div id="searchBar" role="search">
  <input type="search" id="searchInput" placeholder="Search notes and topics..." aria-label="Search notes and topics" autocomplete="off" />
</div>

<footer role="tablist" aria-label="Primary subjects navigation">
  <button class="bubble-nav" data-subject="current" aria-selected="true" role="tab" tabindex="0" aria-controls="topicList" aria-label="Current Affairs"><i class="fa-solid fa-globe"></i>Current</button>
  <button class="bubble-nav" data-subject="math" aria-selected="false" role="tab" tabindex="-1" aria-controls="topicList" aria-label="Math"><i class="fa-solid fa-square-root-variable"></i>Math</button>
  <button class="bubble-nav" data-subject="english" aria-selected="false" role="tab" tabindex="-1" aria-controls="topicList" aria-label="English Grammar"><i class="fa-solid fa-book-open"></i>English</button>
  <button class="bubble-nav" data-subject="computer" aria-selected="false" role="tab" tabindex="-1" aria-controls="topicList" aria-label="Computer"><i class="fa-solid fa-laptop-code"></i>Computer</button>
</footer>

<script src="https://kit.fontawesome.com/a81368914c.js" crossorigin="anonymous"></script>
<script>
(() => {
  const data = {
    current: {
      name: "Current Affairs",
      topics: {
        event1: {
          title: "Global Climate Summit 2024",
          description: "An international summit focused on establishing global commitments to combat climate change.",
          detailed: "<h3>Summit Overview</h3><p>The 2024 Global Climate Summit represented a critical gathering of international leaders dedicated to actionable solutions addressing climate crisis. Participants emphasized urgent need to reduce greenhouse gases, invest in renewable energy infrastructure, and support vulnerable communities facing climate disruptions.</p><p><strong>Key Agreements:</strong></p><ul><li>Commitment to reduce carbon emissions by 50% before 2030.</li><li>Increased funding for climate finance mechanisms aiding developing nations.</li><li>Promotion of technology transfer for sustainable energy solutions.</li></ul><p>This summit set a roadmap for collaborative international climate policy implementation over the next decade.</p>",
          date: "April 2024",
          content: "World leaders pledged ambitious climate goals focused on finance, technology, and sustainability to protect the planet for future generations."
        },
        event2: {
          title: "Space Tourism Breakthrough",
          description: "A milestone flight marks the maturity of commercial space tourism.",
          detailed: "<h3>Flight Milestone</h3><p>The suborbital flight successfully carried private passengers, demonstrating reusable launch technology and promising affordable access to space. Safety protocols, passenger experiences including microgravity exposure, and reentry procedures were closely analyzed.</p><p><strong>Industry Implications:</strong></p><ul><li>Expansion of space tourism market and job creation.</li><li>Technological advances influencing satellite deployment.</li><li>Policy discussions aimed at regulating space traffic and environment.</li></ul>",
          date: "May 2024",
          content: "Commercial space tourism advances open new frontiers for exploration, research, and enterprise beyond Earth’s atmosphere."
        },
        event3: {
          title: "Artificial Intelligence Ethics Framework",
          description: "A unified ethical standard for artificial intelligence proposed across nations.",
          detailed: "<h3>Framework Summary</h3><p>This comprehensive framework addresses transparency, fairness, accountability, and privacy in AI development and deployment. It highlights inclusive governance models and risk management practices, prioritizing human rights and mitigating bias.</p><p>Recommendations focus on robust auditing, public participation, and cross-border cooperation to enable responsible innovation.</p>",
          date: "June 2024",
          content: "AI ethics framework seeks to balance technological progress with societal values, ensuring equitable benefits and mitigating harms."
        },
        event4: {
          title: "Renewable Energy Surging Globally",
          description: "Renewables surpass fossil fuels as primary global energy source.",
          detailed: "<h3>Energy Transition</h3><p>For the first time, renewable energy accounted for over 40% of global electricity production. Advances in solar, wind, and hydro technologies reduced costs dramatically, driving widescale adoption across continents.</p><p>Challenges remain including grid integration, storage solutions, and policy incentives for sustainability.</p>",
          date: "April 2024",
          content: "Renewable energy growth highlights shift toward sustainable, low-carbon economies."
        }
      }
    },
    math: {
      name: "Math",
      topics: {
        algebra: {
          title: "Algebra",
          description: "Advanced concepts of algebra including structures, equations, and theory.",
          detailed: `
          <h3>Introduction</h3>
          <p>Algebra is the branch of mathematics that studies rules of operations and relations using variables and constants. Beyond elementary algebra (equations and polynomials), modern algebra covers abstract algebraic structures.</p>
          <h3>Key Concepts:</h3>
          <ul>
            <li><strong>Groups:</strong> Set with a binary operation satisfying closure, associativity, identity, and inverses.</li>
            <li><strong>Rings:</strong> Algebraic structures with two binary operations generalizing arithmetic.</li>
            <li><strong>Fields:</strong> Sets with addition and multiplication satisfying additional properties.</li>
            <li><strong>Solving Polynomials:</strong> Roots, factoring, the Fundamental Theorem of Algebra.</li>
          </ul>
          <h3>Applications:</h3>
          <p>Provides the foundation for many mathematical disciplines and is essential in cryptography, coding theory, and computer science.</p>
          `
        },
        calculus: {
          title: "Calculus",
          description: "In-depth study of differential and integral calculus, sequences, and series.",
          detailed: `
          <h3>Limits and Continuity</h3>
          <p>Understanding the behavior of functions as they approach specific inputs, defining continuity, and foundational to calculus.</p>
          <h3>Differentiation</h3>
          <p>Techniques include product, quotient, and chain rules. Applications to rates of change, tangents, optimization problems.</p>
          <h3>Integration</h3>
          <p>Fundamental in calculating areas, volumes, accumulated quantities. Techniques include substitution and integration by parts.</p>
          <h3>Sequences and Series</h3>
          <p>Study of convergence, Taylor and Maclaurin series expansions with applications in approximations.</p>
          <h3>Applications</h3>
          <p>Widely used in physics, engineering, biology, economics for modeling dynamic systems and change.</p>
          `
        },
        geometry: {
          title: "Geometry",
          description: "Rigorous treatment of Euclidean and non-Euclidean geometry, including proofs and constructions.",
          detailed: `
          <h3>Foundations</h3>
          <p>Exploration of definitions, axioms, and theorems in Euclidean geometry, including points, lines, planes, and angles.</p>
          <h3>Triangles and Polygons</h3>
          <p>Detailed study of properties, area formulas, similarity, congruence criteria (SSS, SAS, ASA).</p>
          <h3>Circles</h3>
          <p>Investigations of chords, tangents, arcs, angles, and associated theorems.</p>
          <h3>Coordinate Geometry</h3>
          <p>Using algebraic methods to study geometric figures, calculating slopes and distances, and transformations.</p>
          <h3>Non-Euclidean Geometry</h3>
          <p>Introduction to hyperbolic and spherical geometry with applications.</p>
          `
        },
        trigonometry: {
          title: "Trigonometry",
          description: "Comprehensive study of trigonometric functions, identities, and equations.",
          detailed: `
          <h3>Definitions</h3>
          <p>Sine, Cosine, Tangent defined using right triangles and unit circle approaches.</p>
          <h3>Identities</h3>
          <p>Pythagorean, sum and difference formulas, double angle, half angle identities.</p>
          <h3>Equations</h3>
          <p>Techniques to solve linear and quadratic trigonometric equations.</p>
          <h3>Applications</h3>
          <p>Modeling waves, oscillations, and solving real-world angle/length problems.</p>
          `
        },
        statistics: {
          title: "Statistics",
          description: "Advanced statistical methods and probability theory for data analysis.",
          detailed: `
          <h3>Descriptive Statistics</h3>
          <p>Measures of central tendency and variability.</p>
          <h3>Probability Distributions</h3>
          <p>Binomial, Poisson, Normal and their properties.</p>
          <h3>Hypothesis Testing</h3>
          <p>Tests such as t-test, chi-square, ANOVA, and their conditions.</p>
          <h3>Regression Analysis</h3>
          <p>Simple and multiple linear regression, diagnostics.</p>
          <h3>Applications</h3>
          <p>Critical for research, economics, social sciences, and data science.</p>
          `
        }
      }
    },
    english: {
      name: "English Grammar",
      topics: {
        tenses: {
          title: "Tenses",
          description: "Detailed exploration of English tense system with context and examples.",
          detailed: `
          <h3>Overview</h3>
          <p>English has 12 basic tenses categorized in past, present, and future with simple, continuous, perfect forms.</p>
          <h3>Present Tenses</h3>
          <p>Simple Present for habitual actions, Present Continuous for ongoing actions, Present Perfect for experience and result relevance.</p>
          <h3>Past Tenses</h3>
          <p>Simple Past for completed actions, Past Continuous for interrupted actions, Past Perfect indicating actions before another past action.</p>
          <h3>Future Tenses</h3>
          <p>Will-future for predictions, Going to-future for planned actions, Future Perfect for actions completed before a point in the future.</p>
          <h3>Uses in Sentences</h3>
          <p>Sample sentences illustrating different tenses in common contexts.</p>
          `
        },
        punctuation: {
          title: "Punctuation",
          description: "Rules and usage of English punctuation marks with examples.",
          detailed: `
          <h3>Comma (,)</h3>
          <p>Separates items in lists, offsets introductory phrases, and separates clauses.</p>
          <h3>Period (.)</h3>
          <p>Marks end of declarative sentences.</p>
          <h3>Semicolon (;)</h3>
          <p>Separates related independent clauses and complex list items.</p>
          <h3>Colon (:)</h3>
          <p>Introduces lists, explanations, and quotations.</p>
          <h3>Quotation Marks (“ ”)</h3>
          <p>Enclose direct speech, quotations, and titles.</p>
          <h3>Apostrophe (’)</h3>
          <p>Shows possession or contractions.</p>
          <h3>Examples and Common Errors</h3>
          <p>Practical guides to usage and avoiding mistakes.</p>
          `
        }
      }
    },
    computer: {
      name: "Computer",
      topics: {
        msOffice: {
          title: "MS Office",
          description: "In-depth guide to Microsoft Office productivity tools.",
          detailed: `
          <h3>Microsoft Word</h3>
          <p>Create and format professional documents using styles, templates, sections, and references.</p>
          <h3>Microsoft Excel</h3>
          <p>Use formulas, pivot tables, charts, and macros for data analysis and automation.</p>
          <h3>PowerPoint</h3>
          <p>Design impactful presentations with themes, animations, and multimedia.</p>
          `
        },
        programming: {
          title: "Programming",
          description: "Core programming concepts for beginners and intermediate learners.",
          detailed: `
          <h3>Data Types & Variables</h3>
          <p>Understanding primitive data types and storing information in variables.</p>
          <h3>Control Flow</h3>
          <p>Conditional statements (if-else) and loops (for, while) controlling program logic.</p>
          <h3>Functions & Recursion</h3>
          <p>Modularizing code with functions and understanding recursive algorithms.</p>
          <h3>Object-Oriented Programming</h3>
          <p>Classes, inheritance, encapsulation principles for scalable code.</p>
          `
        },
        networking: {
          title: "Networking",
          description: "Fundamental concepts in computer networking.",
          detailed: `
          <h3>Networking Models</h3>
          <p>OSI and TCP/IP models explaining different network layers.</p>
          <h3>IP Addressing</h3>
          <p>Understanding IPv4/IPv6, subnetting, and address allocation.</p>
          <h3>Protocols</h3>
          <p>HTTP, FTP, SMTP, and their roles in communication.</p>
          `
        },
        cybersecurity: {
          title: "Cybersecurity",
          description: "Principles and practices for securing systems and data.",
          detailed: `
          <h3>Threat Landscape</h3>
          <p>Types of malware, phishing, denial-of-service attacks.</p>
          <h3>Security Measures</h3>
          <p>Firewalls, antivirus, encryption, multi-factor authentication.</p>
          <h3>Best Practices</h3>
          <p>Patch management, secure coding, user protocols.</p>
          `
        }
      }
    }
  };

  let currentSubjectKey = 'current';
  let currentTopicKey = null;
  let searchActive = false;
  let currentAffairsIndex = 0;
  let currentAffairsTimerId = null;

  const topicListEl = document.getElementById('topicList');
  const readingPageEl = document.getElementById('readingPage');
  const readingContentEl = document.getElementById('readingContent');
  const appHeaderEl = document.getElementById('appHeader');
  const searchToggleBtn = document.getElementById('searchToggle');
  const searchBarEl = document.getElementById('searchBar');
  const searchInputEl = document.getElementById('searchInput');
  const navButtons = document.querySelectorAll('.bubble-nav');
  const backToTopicsBtn = document.getElementById('backToTopics');

  function setActiveNav(subjectKey) {
    navButtons.forEach(btn => {
      btn.classList.toggle('active', btn.dataset.subject === subjectKey);
      btn.setAttribute('aria-selected', btn.dataset.subject === subjectKey ? 'true' : 'false');
      btn.tabIndex = btn.dataset.subject === subjectKey ? 0 : -1;
    });
  }

  function showTopicList() {
    readingPageEl.style.display = 'none';
    topicListEl.style.display = 'block';
    appHeaderEl.textContent = data[currentSubjectKey].name;
    readingPageEl.scrollTop = 0;
    topicListEl.scrollTop = 0;
  }

  function showReadingPage() {
    topicListEl.style.display = 'none';
    readingPageEl.style.display = 'block';
    readingPageEl.focus();
    topicListEl.scrollTop = 0;
    readingPageEl.scrollTop = 0;
  }

  function clearSearch() {
    searchInputEl.value = '';
    searchBarEl.style.display = 'none';
    searchActive = false;
  }

  function renderTopicList(subjectKey, filter = '') {
    topicListEl.innerHTML = '';
    const subject = data[subjectKey];
    if(!subject) return;
    const topics = subject.topics;
    const keys = Object.keys(topics);
    const filterLower = filter.toLowerCase();

    const filteredKeys = filter.trim() === '' ? keys : keys.filter(k => {
      const t = topics[k];
      return t.title.toLowerCase().includes(filterLower)
        || t.description.toLowerCase().includes(filterLower)
        || (t.detailed && t.detailed.toLowerCase().includes(filterLower));
    });

    if(filteredKeys.length === 0) {
      const li = document.createElement('li');
      li.className = 'no-result';
      li.textContent = 'No topics found.';
      topicListEl.appendChild(li);
      return;
    }

    filteredKeys.forEach(key => {
      const topic = topics[key];
      const li = document.createElement('li');
      li.tabIndex = 0;
      li.className = 'topic-item';
      const iconClass = {
        current: 'fa-globe',
        math: 'fa-square-root-variable',
        english: 'fa-book-open',
        computer: 'fa-laptop-code'
      };
      const subjectIcon = iconClass[currentSubjectKey] || 'fa-circle';
      li.innerHTML = `<i class="fa-solid ${subjectIcon}"></i> ${topic.title}`;
      li.onclick = () => selectTopic(key);
      li.onkeypress = e => {
        if(e.key === "Enter" || e.key === " ") {
          selectTopic(key);
        }
      };
      topicListEl.appendChild(li);
    });
  }

  function selectTopic(topicKey) {
    const subject = data[currentSubjectKey];
    if(!subject) return;
    const topic = subject.topics[topicKey];
    if(!topic) return;
    currentTopicKey = topicKey;

    appHeaderEl.textContent = `${subject.name} - ${topic.title}`;
    readingContentEl.innerHTML = `
      <h2>${topic.title}</h2>
      <p><em>${topic.description}</em></p>
      ${topic.detailed || ''}
    `;
    showReadingPage();
    clearSearch();
  }

  function startCurrentAffairsCarousel() {
    const keys = Object.keys(data.current.topics);
    if(keys.length === 0) return;
    currentAffairsIndex = 0;
    renderCurrentAffairs(keys[currentAffairsIndex]);

    if(currentAffairsTimerId) clearInterval(currentAffairsTimerId);
    currentAffairsTimerId = setInterval(() => {
      currentAffairsIndex++;
      if(currentAffairsIndex >= keys.length) currentAffairsIndex = 0;
      renderCurrentAffairs(keys[currentAffairsIndex]);
    }, 12000);
  }

  function renderCurrentAffairs(key) {
    const topic = data.current.topics[key];
    if(!topic) return;
    currentTopicKey = null;
    appHeaderEl.textContent = `Current Affairs - ${topic.title}`;
    readingContentEl.innerHTML = `
      <div class='current-affairs-carousel'>
        <div class='carousel-title'>${topic.title}</div>
        <div class='carousel-date'>${topic.date || ''}</div>
        <div class='carousel-content'>${topic.content}</div>
        ${topic.detailed || ''}
      </div>
    `;
    showReadingPage();
  }

  function stopCurrentAffairsCarousel() {
    if(currentAffairsTimerId) {
      clearInterval(currentAffairsTimerId);
      currentAffairsTimerId = null;
    }
  }

  function selectSubject(subjectKey) {
    if(currentSubjectKey === subjectKey) return;
    currentSubjectKey = subjectKey;
    currentTopicKey = null;
    clearSearch();
    setActiveNav(subjectKey);

    if(subjectKey === 'current') {
      startCurrentAffairsCarousel();
    } else {
      stopCurrentAffairsCarousel();
      appHeaderEl.textContent = data[subjectKey].name;
      renderTopicList(subjectKey);
      showTopicList();
    }
  }

  function toggleSearch() {
    if(searchActive) {
      clearSearch();
      if(currentSubjectKey === 'current') {
        startCurrentAffairsCarousel();
      } else {
        renderTopicList(currentSubjectKey);
        showTopicList();
      }
    } else if(currentSubjectKey) {
      if(currentSubjectKey === 'current') stopCurrentAffairsCarousel();
      searchBarEl.style.display = 'block';
      searchInputEl.focus();
      searchActive = true;
    }
  }

  function onSearchInput() {
    const query = searchInputEl.value.trim();
    if(currentSubjectKey === 'current') {
      const filteredKeys = Object.keys(data.current.topics).filter(k => {
        const t = data.current.topics[k];
        const qLower = query.toLowerCase();
        return (t.title.toLowerCase().includes(qLower) || t.description.toLowerCase().includes(qLower) || t.content.toLowerCase().includes(qLower));
      });

      if(filteredKeys.length > 0) {
        stopCurrentAffairsCarousel();
        topicListEl.innerHTML = '';
        filteredKeys.forEach(key => {
          const topic = data.current.topics[key];
          const li = document.createElement('li');
          li.tabIndex = 0;
          li.className = 'topic-item';
          li.innerHTML = '<i class="fa-solid fa-globe"></i> ' + topic.title;
          li.onclick = () => selectCurrentAffairsTopic(key);
          li.onkeypress = e => {
            if(e.key === "Enter" || e.key === " ") selectCurrentAffairsTopic(key);
          };
          topicListEl.appendChild(li);
        });
        showTopicList();
        readingPageEl.style.display = 'none';
        appHeaderEl.textContent = `Search results for "${query}"`;
      } else {
        topicListEl.innerHTML = '<li class="no-result">No results found.</li>';
        showTopicList();
        readingPageEl.style.display = 'none';
        appHeaderEl.textContent = `Search results for "${query}"`;
      }
    } else {
      renderTopicList(currentSubjectKey, query);
      showTopicList();
      readingPageEl.style.display = 'none';
      appHeaderEl.textContent = query ? `Search results for "${query}"` : data[currentSubjectKey].name;
    }
  }

  function selectCurrentAffairsTopic(topicKey) {
    const topic = data.current.topics[topicKey];
    if(!topic) return;
    currentTopicKey = topicKey;
    appHeaderEl.textContent = `Current Affairs - ${topic.title}`;
    readingContentEl.innerHTML = `
      <h2>${topic.title}</h2>
      <p><em>${topic.description}</em></p>
      <p>${topic.content}</p>
      ${topic.detailed || ''}
    `;
    showReadingPage();
    clearSearch();
  }

  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      selectSubject(btn.dataset.subject);
    });
    btn.addEventListener('keydown', e => {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        selectSubject(btn.dataset.subject);
      }
    });
  });

  searchToggleBtn.addEventListener('click', toggleSearch);
  searchInputEl.addEventListener('input', onSearchInput);
  backToTopicsBtn.addEventListener('click', () => {
    clearSearch();
    if(currentSubjectKey === 'current') {
      startCurrentAffairsCarousel();
    } else {
      appHeaderEl.textContent = data[currentSubjectKey].name;
      renderTopicList(currentSubjectKey);
      showTopicList();
    }
  });

  window.addEventListener('load', () => {
    setActiveNav(currentSubjectKey);
    if(currentSubjectKey === 'current') {
      startCurrentAffairsCarousel();
    } else {
      renderTopicList(currentSubjectKey);
      showTopicList();
    }
  });
})();
</script>
</body>
</html>
